{"version":3,"sources":["webpack:///static/js/app.383f5418c9943cb6f3d3.js","webpack:///./src/main.js","webpack:///./src/common/js/util.js","webpack:///./src/components/directives/clickoutside.js","webpack:///App.vue","webpack:///task.vue","webpack:///./src/App.vue?08c8","webpack:///./src/components/task/task.vue?d9e3","webpack:///./src/App.vue","webpack:///./src/components/task/task.vue"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_vueResource","_vueResource2","_vueRouter","_vueRouter2","_App","_App2","_iview","_iview2","use","router","linkActiveClass","console","log","start","formatDate","oldDate","date","Date","getFullYear","getMonth","getDate","getTodayRange","today","Object","defineProperty","value","bind","_this","this","documentHandler","e","el","contains","target","expression","vm","document","addEventListener","update","unbind","removeEventListener","_task","_task2","_util","DATE_TYPE_DAY","DATE_TYPE_WEEK","DATE_TYPE_MONTH","MSEC_OF_DAY","data","taskType","dateRange","dateType","components","task","created","computed","isToday","toDateString","methods","setDateType","_dateRange","toLowerCase","push","day","getDay","firstDay","lastDay","setToday","changeDate","flag","NEXT_FLAG","PRE_FLAG","daySpan","_date","_firstDay","_lastDay","filters","dateFMT","Array","isArray","length","_clickoutside","_clickoutside2","MSG_STATUS_OK","TASK_UNDONE","props","taskRank","type","Number","required","String","directives","clickoutside","title","addInputShow","height","taskDateRange","taskList","columns","key","render","row","column","index","state","classMap","textMap","getTasks","ready","getElementsByClassName","offsetHeight","watch","showInput","that","$nextTick","disableClickOutSide","handleClose","callback","$http","get","params","dateStart","toISOString","dateEnd","then","response","body","status","taskArrays","docs","map","item","id","_id","startTime","endTime","addTask","_this2","rank","post","description","finishTask","_this3","put","removeTask","_this4","delete","__vue_script__","__vue_template__","__vue_styles__","__vue_options__","options","template","keys","forEach"],"mappings":"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","file":"static/js/app.383f5418c9943cb6f3d3.js","sourcesContent":["webpackJsonp([1,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(2);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _vueResource = __webpack_require__(15);\n\t\n\tvar _vueResource2 = _interopRequireDefault(_vueResource);\n\t\n\tvar _vueRouter = __webpack_require__(16);\n\t\n\tvar _vueRouter2 = _interopRequireDefault(_vueRouter);\n\t\n\tvar _App = __webpack_require__(13);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tvar _iview = __webpack_require__(10);\n\t\n\tvar _iview2 = _interopRequireDefault(_iview);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vueRouter2.default);\n\t_vue2.default.use(_vueResource2.default);\n\t_vue2.default.use(_iview2.default);\n\tvar router = new _vueRouter2.default({\n\t  linkActiveClass: 'active'\n\t});\n\tconsole.log('test aa');\n\trouter.start(_App2.default, '#app');\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction formatDate(oldDate) {\n\t  var date = new Date(oldDate);\n\t  return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n\t}\n\tfunction getTodayRange() {\n\t  var today = new Date();\n\t  return [+new Date(today.getFullYear(), today.getMonth(), today.getDate()), +new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1, 0, 0, -1)];\n\t}\n\tmodule.exports = {\n\t  formatDate: formatDate,\n\t  getTodayRange: getTodayRange\n\t};\n\n/***/ },\n/* 2 */,\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  bind: function bind() {\n\t    var _this = this;\n\t\n\t    this.documentHandler = function (e) {\n\t      if (_this.el.contains(e.target)) {\n\t        return false;\n\t      }\n\t      if (_this.expression) {\n\t        _this.vm[_this.expression]();\n\t      }\n\t    };\n\t    document.addEventListener('click', this.documentHandler);\n\t  },\n\t  update: function update() {},\n\t  unbind: function unbind() {\n\t    document.removeEventListener('click', this.documentHandler);\n\t  }\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _task = __webpack_require__(14);\n\t\n\tvar _task2 = _interopRequireDefault(_task);\n\t\n\tvar _util = __webpack_require__(1);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar DATE_TYPE_DAY = 'day';\n\tvar DATE_TYPE_WEEK = 'week';\n\tvar DATE_TYPE_MONTH = 'month';\n\tvar MSEC_OF_DAY = 1 * 24 * 60 * 60 * 1000;\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      taskType: 'ALL',\n\t      dateRange: [],\n\t      dateType: '' };\n\t  },\n\t\n\t  components: {\n\t    task: _task2.default\n\t  },\n\t  created: function created() {\n\t    this.dateType = DATE_TYPE_DAY;\n\t    this.dateRange = (0, _util.getTodayRange)();\n\t  },\n\t\n\t  computed: {\n\t    isToday: function isToday() {\n\t      return this.dateType === DATE_TYPE_DAY && new Date().toDateString() === new Date(this.dateRange[0]).toDateString();\n\t    }\n\t  },\n\t  methods: {\n\t    setDateType: function setDateType(dateType) {\n\t      var _dateRange = [];\n\t      var dateRange = this.dateRange;\n\t      this.dateType = dateType.toLowerCase();\n\t      switch (dateType) {\n\t        case 'DAY':\n\t          _dateRange.push(dateRange[0]);\n\t          _dateRange.push(dateRange[0] + MSEC_OF_DAY - 1000);\n\t          break;\n\t        case 'WEEK':\n\t          var day = new Date(dateRange[0]).getDay();\n\t          day = day === 0 ? 7 : day;\n\t          _dateRange.push(dateRange[0] - (day - 1) * MSEC_OF_DAY);\n\t          _dateRange.push(dateRange[0] + (8 - day) * MSEC_OF_DAY - 1000);\n\t          break;\n\t        case 'MONTH':\n\t          var date = new Date(dateRange[0]);\n\t          var firstDay = +new Date(date.getFullYear(), date.getMonth(), 1);\n\t          var lastDay = +new Date(date.getFullYear(), date.getMonth() + 1, 0);\n\t          _dateRange.push(firstDay);\n\t          _dateRange.push(lastDay);\n\t          break;\n\t      }\n\t      this.dateRange = _dateRange;\n\t    },\n\t    setToday: function setToday() {\n\t      this.dateType = DATE_TYPE_DAY;\n\t      this.dateRange = (0, _util.getTodayRange)();\n\t    },\n\t    changeDate: function changeDate(flag) {\n\t      var NEXT_FLAG = 1;\n\t      var PRE_FLAG = -1;\n\t      var _dateRange = [];\n\t      var dateRange = this.dateRange;\n\t      var daySpan = 7;\n\t      if (flag === PRE_FLAG) {\n\t        switch (this.dateType) {\n\t          case DATE_TYPE_DAY:\n\t            daySpan = 1;\n\t\n\t          case DATE_TYPE_WEEK:\n\t            _dateRange.push(dateRange[0] - daySpan * MSEC_OF_DAY);\n\t            _dateRange.push(dateRange[1] - daySpan * MSEC_OF_DAY);\n\t            break;\n\t          case DATE_TYPE_MONTH:\n\t            var date = new Date(dateRange[0]);\n\t            var firstDay = +new Date(date.getFullYear(), date.getMonth() - 1, 1);\n\t            var lastDay = +new Date(date.getFullYear(), date.getMonth(), 0);\n\t            _dateRange.push(firstDay);\n\t            _dateRange.push(lastDay);\n\t            break;\n\t        }\n\t      } else if (flag === NEXT_FLAG) {\n\t        switch (this.dateType) {\n\t          case DATE_TYPE_DAY:\n\t            daySpan = 1;\n\t\n\t          case DATE_TYPE_WEEK:\n\t            _dateRange.push(dateRange[0] + daySpan * MSEC_OF_DAY);\n\t            _dateRange.push(dateRange[1] + daySpan * MSEC_OF_DAY);\n\t            break;\n\t          case DATE_TYPE_MONTH:\n\t            var _date = new Date(dateRange[0]);\n\t            var _firstDay = +new Date(_date.getFullYear(), _date.getMonth() + 1, 1);\n\t            var _lastDay = +new Date(_date.getFullYear(), _date.getMonth() + 2, 0);\n\t            _dateRange.push(_firstDay);\n\t            _dateRange.push(_lastDay);\n\t            break;\n\t        }\n\t      }\n\t      this.dateRange = _dateRange;\n\t    }\n\t  },\n\t  filters: {\n\t    dateFMT: function dateFMT(dateRange) {\n\t      if (Array.isArray(dateRange) && dateRange.length === 2) {\n\t        return (0, _util.formatDate)(dateRange[0]) + '~' + (0, _util.formatDate)(dateRange[1]);\n\t      }\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _clickoutside = __webpack_require__(3);\n\t\n\tvar _clickoutside2 = _interopRequireDefault(_clickoutside);\n\t\n\tvar _util = __webpack_require__(1);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar MSG_STATUS_OK = 1;\n\tvar TASK_UNDONE = 0;\n\texports.default = {\n\t  props: {\n\t    taskRank: {\n\t      type: Number,\n\t      required: true\n\t    },\n\t    dateRange: {\n\t      type: Array,\n\t      required: true\n\t    },\n\t    taskType: {\n\t      type: String,\n\t      required: true\n\t    }\n\t  },\n\t  directives: {\n\t    clickoutside: _clickoutside2.default\n\t  },\n\t  data: function data() {\n\t    return {\n\t      title: '',\n\t      addInputShow: false,\n\t      height: 0,\n\t      taskDateRange: [],\n\t      taskList: [],\n\t      columns: [{\n\t        title: '任务名',\n\t        key: 'title'\n\t      }, {\n\t        title: '开始时间',\n\t        key: 'startTime'\n\t      }, {\n\t        title: '结束时间',\n\t        key: 'endTime'\n\t      }, {\n\t        title: '操作',\n\t        key: 'state',\n\t        render: function render(row, column, index) {\n\t          var state = row.state;\n\t          if (state === 1) {\n\t            return '<i-button type=\"primary\" size=\"small\">\\u67E5\\u770B</i-button><i-button type=\"error\" size=\"small\" @click=\"removeTask(' + index + ')\">\\u5220\\u9664</i-button>';\n\t          } else {\n\t            return '<i-button type=\"success\" size=\"small\" @click=\"finishTask(' + index + ')\">\\u5B8C\\u6210</i-button><i-button type=\"error\" size=\"small\" @click=\"removeTask(' + index + ')\">\\u5220\\u9664</i-button>';\n\t          }\n\t        }\n\t      }]\n\t    };\n\t  },\n\t  created: function created() {\n\t    this.classMap = [null, 'error', 'warn', 'info', 'success'];\n\t    this.textMap = [null, '很重要-很紧急', '重要不紧急', '不重要-紧急', '不重要-不紧急'];\n\t    this.taskDateRange = (0, _util.getTodayRange)();\n\t    this.getTasks();\n\t  },\n\t  ready: function ready() {\n\t    console.log(document.getElementsByClassName('task')[0].offsetHeight);\n\t    this.height = document.getElementsByClassName('rank' + this.taskRank)[0].offsetHeight - 50;\n\t  },\n\t\n\t  watch: {\n\t    'dateRange': function dateRange() {\n\t      console.log('dateRange changing');\n\t      this.getTasks();\n\t    },\n\t    'taskType': function taskType() {\n\t      console.log('dateType changing');\n\t      this.getTasks();\n\t    }\n\t  },\n\t  methods: {\n\t    showInput: function showInput() {\n\t      console.log('添加dsa');\n\t      if (!this.addInputShow) {\n\t        this.addInputShow = true;\n\t      }\n\t      var that = this;\n\t      this.$nextTick(function () {\n\t        that.disableClickOutSide = true;\n\t      });\n\t    },\n\t    handleClose: function handleClose() {\n\t      if (this.disableClickOutSide) {\n\t        console.log('关闭');\n\t        if (this.addInputShow) {\n\t          this.addInputShow = false;\n\t        }\n\t      }\n\t    },\n\t    getTasks: function getTasks(callback) {\n\t      var _this = this;\n\t\n\t      var dateRange = this.dateRange;\n\t      var taskRank = this.taskRank;\n\t      var taskType = this.taskType;\n\t      this.$http.get('/api/todoList', {\n\t        params: {\n\t          dateRange: {\n\t            dateStart: new Date(dateRange[0]).toISOString(),\n\t            dateEnd: new Date(dateRange[1]).toISOString()\n\t          },\n\t          taskRank: taskRank,\n\t          taskType: taskType\n\t        }\n\t      }).then(function (response) {\n\t        var data = response.body;\n\t        if (data.status === MSG_STATUS_OK) {\n\t          var taskArrays = data.data.docs;\n\t          _this.taskList = taskArrays.map(function (item) {\n\t            return {\n\t              id: item._id,\n\t              title: item.title,\n\t              startTime: (0, _util.formatDate)(new Date(item.startTime)),\n\t              endTime: (0, _util.formatDate)(new Date(item.endTime)),\n\t              state: item.state\n\t            };\n\t          });\n\t          callback && callback(response);\n\t        }\n\t      });\n\t    },\n\t    addTask: function addTask() {\n\t      var _this2 = this;\n\t\n\t      console.log('addTask...');\n\t      this.addInputShow = false;\n\t      var taskDateRange = this.taskDateRange;\n\t      var title = this.title;\n\t      var rank = this.taskRank;\n\t      this.title = '';\n\t      this.$http.post('/api/todo', {\n\t        title: title,\n\t        description: '',\n\t        startTime: new Date(taskDateRange[0]).toISOString(),\n\t        endTime: new Date(taskDateRange[1]).toISOString(),\n\t        rank: rank,\n\t        'state': TASK_UNDONE\n\t      }).then(function (response) {\n\t        var data = response.body;\n\t        if (data.status === MSG_STATUS_OK) {\n\t          _this2.getTasks();\n\t        }\n\t      });\n\t    },\n\t    finishTask: function finishTask(index) {\n\t      var _this3 = this;\n\t\n\t      var id = this.taskList[index].id;\n\t      this.$http.put('/api/todo', {\n\t        id: id,\n\t        state: 1\n\t      }).then(function (response) {\n\t        if (response.body.status === MSG_STATUS_OK) {\n\t          _this3.getTasks();\n\t        }\n\t      });\n\t    },\n\t    removeTask: function removeTask(index) {\n\t      var _this4 = this;\n\t\n\t      console.log(index);\n\t      var id = this.taskList[index].id;\n\t      this.$http.delete('/api/todo', {\n\t        params: {\n\t          id: id\n\t        }\n\t      }).then(function (response) {\n\t        var status = response.body.status;\n\t        if (status === MSG_STATUS_OK) {\n\t          _this4.getTasks();\n\t        }\n\t      });\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 10 */,\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div id=main> <div class=body> <div class=header> <div class=date-pick-wrapper> <div class=date-pick-show> <span id=date-show v-text=dateRange|dateFMT></span> <i class=\\\"icon icon-angle-left\\\" @click=changeDate(-1)></i> <i class=\\\"icon icon-angle-right\\\" @click=changeDate(1)></i> </div> <div class=date-pick> <span class=today :class=\\\"{'active':isToday}\\\" @click=setToday>今天</span> <ul class=type-pick> <li @click=\\\"setDateType('DAY')\\\" :class=\\\"{active:dateType==='day'}\\\">日</li> <li @click=\\\"setDateType('WEEK')\\\" :class=\\\"{active:dateType==='week'}\\\">周</li> <li @click=\\\"setDateType('MONTH')\\\" :class=\\\"{active:dateType==='month'}\\\">月</li> </ul> </div> </div> <div class=task-type> <div class=select-wrapper> <i-select style=width:100px :model.sync=taskType> <i-option value=ALL>全部</i-option> <i-option value=DONE>已完成</i-option> <i-option value=UNDONE>未完成</i-option> </i-select> </div> </div> </div> <div class=content> <div class=left-wrapper> <div class=rank1> <task :task-rank=1 :date-range=dateRange :task-type=taskType></task> </div> <div class=rank3> <task :task-rank=3 :date-range=dateRange :task-type=taskType></task> </div> </div> <div class=right-wrapper> <div class=rank2> <task :task-rank=2 :date-range=dateRange :task-type=taskType></task> </div> <div class=rank4> <task :task-rank=4 :date-range=dateRange :task-type=taskType></task> </div> </div> </div> </div> </div> \";\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div class=task> <div class=task-add :class=classMap[taskRank]> <span class=task-description>{{textMap[taskRank]}}</span> <icon type=plus @click.stop=showInput></icon> </div> <div class=task-input v-show=addInputShow v-clickoutside=handleClose> <i-input icon=checkmark placeholder=输入任务描述,按回车键完成 v-on:on-enter=addTask v-on:on-click=addTask :value.sync=title></i-input> <date-picker type=daterange placeholder=选择日期 @click.stop :value.sync=taskDateRange></date-picker> </div> <div class=task-list> <i-table :columns=columns :data=taskList :height=height></i-table> </div> </div> \";\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\tvar __vue_styles__ = {}\n\t__webpack_require__(8)\n\t__vue_script__ = __webpack_require__(4)\n\t__vue_template__ = __webpack_require__(11)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\n\tif (__vue_template__) {\n\t__vue_options__.template = __vue_template__\n\t}\n\tif (!__vue_options__.computed) __vue_options__.computed = {}\n\tObject.keys(__vue_styles__).forEach(function (key) {\n\tvar module = __vue_styles__[key]\n\t__vue_options__.computed[key] = function () { return module }\n\t})\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\tvar __vue_styles__ = {}\n\t__webpack_require__(9)\n\t__vue_script__ = __webpack_require__(5)\n\t__vue_template__ = __webpack_require__(12)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\n\tif (__vue_template__) {\n\t__vue_options__.template = __vue_template__\n\t}\n\tif (!__vue_options__.computed) __vue_options__.computed = {}\n\tObject.keys(__vue_styles__).forEach(function (key) {\n\tvar module = __vue_styles__[key]\n\t__vue_options__.computed[key] = function () { return module }\n\t})\n\n\n/***/ },\n/* 15 */,\n/* 16 */,\n/* 17 */\n/***/ function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.383f5418c9943cb6f3d3.js","import Vue from 'vue';\nimport VueResource from 'vue-resource';\nimport VueRouter from 'vue-router';\nimport App from './App';\nimport iView from 'iview';\nimport 'iview/dist/styles/iview.css';\nimport 'common/stylus/index.styl';\n\nVue.use(VueRouter);\nVue.use(VueResource);\nVue.use(iView);\nvar router = new VueRouter({\n  linkActiveClass: 'active'\n});\nconsole.log('test aa');\nrouter.start(App, '#app');\n/* eslint-disable no-new */\n// new Vue({\n//   el: 'body',\n//   components: { App }\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function formatDate(oldDate) {\n  let date = new Date(oldDate);\n  return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n}\nfunction getTodayRange() {\n  let today = new Date();\n  return [\n    +new Date(today.getFullYear(), today.getMonth(), today.getDate()),\n    +new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1, 0, 0, -1)\n  ];\n}\nmodule.exports = {\n  formatDate,\n  getTodayRange\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/util.js","export default {\n  bind () {\n    this.documentHandler = (e) => {\n      if (this.el.contains(e.target)) {\n        return false;\n      }\n      if (this.expression) {\n        this.vm[this.expression]();\n      }\n    };\n      document.addEventListener('click', this.documentHandler);\n  },\n  update () {\n\n  },\n  unbind () {\n    document.removeEventListener('click', this.documentHandler);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/directives/clickoutside.js","<template>\n  <div id=\"main\">\n    <!--<div class=\"side-bar\">-->\n      <!--<Menu theme=\"dark\" active-key=\"1\">-->\n        <!--<Menu-item key=\"1\">-->\n          <!--<Icon type=\"ios-compose\"></Icon>-->\n          <!--任务-->\n        <!--</Menu-item>-->\n        <!--<Menu-item key=\"2\">-->\n          <!--<Icon type=\"search\"></Icon>-->\n          <!--搜索-->\n        <!--</Menu-item>-->\n      <!--</Menu>-->\n    <!--</div>-->\n    <div class=\"body\">\n      <div class=\"header\">\n        <div class=\"date-pick-wrapper\">\n          <div class=\"date-pick-show\">\n            <span id=\"date-show\" v-text=\"dateRange|dateFMT\"></span>\n            <i class=\"icon icon-angle-left\" @click=\"changeDate(-1)\"></i>\n            <i class=\"icon icon-angle-right\" @click=\"changeDate(1)\"></i>\n          </div>\n          <div class=\"date-pick\">\n            <span class=\"today\" :class=\"{'active':isToday}\" @click=\"setToday\">今天</span>\n            <ul class=\"type-pick\">\n              <li @click=\"setDateType('DAY')\" :class=\"{active:dateType==='day'}\">日</li>\n              <li @click=\"setDateType('WEEK')\" :class=\"{active:dateType==='week'}\">周</li>\n              <li @click=\"setDateType('MONTH')\" :class=\"{active:dateType==='month'}\">月</li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"task-type\">\n          <div class=\"select-wrapper\">\n            <i-select style=\"width:100px\" :model.sync=\"taskType\">\n              <i-option value=\"ALL\">全部</i-option>\n              <i-option value=\"DONE\">已完成</i-option>\n              <i-option value=\"UNDONE\">未完成</i-option>\n            </i-select>\n          </div>\n        </div>\n      </div>\n      <div class=\"content\">\n        <div class=\"left-wrapper\">\n          <div class=\"rank1\">\n            <task :task-rank=\"1\" :date-range=\"dateRange\" :task-type=\"taskType\"></task>\n          </div>\n          <div class=\"rank3\">\n            <task :task-rank=\"3\" :date-range=\"dateRange\" :task-type=\"taskType\"></task>\n          </div>\n        </div>\n        <div class=\"right-wrapper\">\n          <div class=\"rank2\">\n            <task :task-rank=\"2\" :date-range=\"dateRange\" :task-type=\"taskType\"></task>\n          </div>\n          <div class=\"rank4\">\n            <task :task-rank=\"4\" :date-range=\"dateRange\" :task-type=\"taskType\"></task>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script >\n  import task from './components/task/task.vue';\n  import {formatDate, getTodayRange} from 'common/js/util';\n  const DATE_TYPE_DAY = 'day';\n  const DATE_TYPE_WEEK = 'week';\n  const DATE_TYPE_MONTH = 'month';\n  const MSEC_OF_DAY = 1 * 24 * 60 * 60 * 1000;\n  export default {\n    data() {\n      return {\n        taskType: 'ALL',\n        dateRange: [],\n        dateType: '' // day week month\n      };\n    },\n    components: {\n    \ttask\n    },\n    created() {\n    \tthis.dateType = DATE_TYPE_DAY;\n    \tthis.dateRange = getTodayRange();\n    },\n    computed: {\n    \tisToday() {\n    \t\treturn this.dateType === DATE_TYPE_DAY && (new Date()).toDateString() === new Date(this.dateRange[0]).toDateString();\n      }\n    },\n    methods: {\n    \tsetDateType(dateType) {\n    \t\tlet _dateRange = [];\n    \t\tlet dateRange = this.dateRange;\n    \t\tthis.dateType = dateType.toLowerCase();\n    \t\tswitch (dateType) {\n          case 'DAY':\n          \t_dateRange.push(dateRange[0]);\n          \t_dateRange.push(dateRange[0] + MSEC_OF_DAY - 1000);\n          \tbreak;\n          case 'WEEK':\n            var day = new Date(dateRange[0]).getDay();\n            day = (day === 0 ? 7 : day);\n            _dateRange.push(dateRange[0] - (day - 1) * MSEC_OF_DAY);\n            _dateRange.push(dateRange[0] + (8 - day) * MSEC_OF_DAY - 1000);\n            break;\n          case 'MONTH':\n            let date = new Date(dateRange[0]);\n            let firstDay = +new Date(date.getFullYear(), date.getMonth(), 1);\n            let lastDay = +new Date(date.getFullYear(), date.getMonth() + 1, 0);\n            _dateRange.push(firstDay);\n            _dateRange.push(lastDay);\n            break;\n        }\n        this.dateRange = _dateRange;\n      },\n      setToday() {\n        this.dateType = DATE_TYPE_DAY;\n        this.dateRange = getTodayRange();\n      },\n      changeDate(flag) {\n        const NEXT_FLAG = 1;\n        const PRE_FLAG = -1;\n        let _dateRange = [];\n        let dateRange = this.dateRange;\n        let daySpan = 7;\n        if (flag === PRE_FLAG) {\n          switch (this.dateType) {\n            case DATE_TYPE_DAY:\n              daySpan = 1;\n              //  falls through\n            case DATE_TYPE_WEEK:\n              _dateRange.push(dateRange[0] - daySpan * MSEC_OF_DAY);\n              _dateRange.push(dateRange[1] - daySpan * MSEC_OF_DAY);\n              break;\n            case DATE_TYPE_MONTH:\n              let date = new Date(dateRange[0]);\n              let firstDay = +new Date(date.getFullYear(), date.getMonth() - 1, 1);\n              let lastDay = +new Date(date.getFullYear(), date.getMonth(), 0);\n              _dateRange.push(firstDay);\n              _dateRange.push(lastDay);\n              break;\n          }\n        } else if (flag === NEXT_FLAG) {\n          switch (this.dateType) {\n            case DATE_TYPE_DAY:\n              daySpan = 1;\n            //  falls through\n            case DATE_TYPE_WEEK:\n              _dateRange.push(dateRange[0] + daySpan * MSEC_OF_DAY);\n              _dateRange.push(dateRange[1] + daySpan * MSEC_OF_DAY);\n              break;\n            case DATE_TYPE_MONTH:\n              let date = new Date(dateRange[0]);\n              let firstDay = +new Date(date.getFullYear(), date.getMonth() + 1, 1);\n              let lastDay = +new Date(date.getFullYear(), date.getMonth() + 2, 0);\n              _dateRange.push(firstDay);\n              _dateRange.push(lastDay);\n              break;\n          }\n        }\n        this.dateRange = _dateRange;\n      }\n    },\n    filters: {\n      dateFMT(dateRange) {\n        if (Array.isArray(dateRange) && dateRange.length === 2) {\n          return formatDate(dateRange[0]) + '~' + formatDate(dateRange[1]);\n        }\n      }\n    }\n  };\n</script>\n\n<style rel=\"stylesheet/stylus\" lang=\"stylus\">\n  borderColor = #d9d9d9;\n  hoverColor = #2BBFF3;\n  #main\n    .body\n      display flex\n      flex 1\n      flex-direction column\n      height 100vh\n      .header\n        display flex\n        flex-basis 45px\n        padding 0 20px\n        border-bottom 1px solid borderColor\n        .date-pick-wrapper\n          flex 1\n          .date-pick-show\n            display inline-block\n            vertical-align top\n            #date-show\n              display inline-block\n              width 200px\n              vertical-align  top\n              font-size 16px\n              line-height 45px\n            .icon\n              padding 0 5px\n              font-size 24px\n              line-height 45px\n              cursor pointer\n              user-select none\n           .date-pick\n              display inline-block\n              margin-left 5px\n              .today\n                position: relative\n                top 9px\n                vertical-align top\n                display inline-block\n                padding 2px 12px\n                border 1px solid borderColor\n                border-radius 2px\n                line-height 24px\n                cursor pointer\n                &:hover\n                  background hoverColor\n                  border-color hoverColor\n                &.active\n                  background hoverColor\n                  border-color hoverColor\n              ul.type-pick\n                position: relative;\n                top 9px\n                display inline-block\n                list-style none\n                line-height 24px\n                li\n                  float left\n                  padding 2px 12px\n                  border-top 1px solid borderColor\n                  border-bottom 1px solid borderColor\n                  border-right 1px solid borderColor\n                  cursor pointer\n                  &:hover\n                    background hoverColor\n                    border-color hoverColor\n                  &:first-child\n                    border-left 1px solid borderColor\n                    border-top-left-radius 2px\n                    border-bottom-left-radius 2px\n                  &:last-child\n                    border-top-right-radius 2px\n                    border-bottom-right-radius 2px\n                  &.active\n                    background hoverColor\n                    border-color hoverColor\n        .task-type\n          flex-basis 100px\n          display flex\n          .select-wrapper\n            align-self center\n      .content\n        display flex\n        flex 1\n        .left-wrapper\n          display flex\n          flex 1\n          flex-direction column\n          width 50%\n          .rank1\n            flex 1\n            border-bottom 1px solid borderColor\n            border-right 1px solid borderColor\n          .rank3\n            flex 1\n            border-right 1px solid borderColor\n        .right-wrapper\n          display flex\n          flex 1\n          flex-direction column\n          width 50%\n          .rank2\n            flex 1\n            border-bottom 1px solid borderColor\n          .rank4\n            flex 1\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?267e7fc8","<template>\n  <div class=\"task\">\n    <div class=\"task-add\" :class=\"classMap[taskRank]\">\n      <span class=\"task-description\">{{textMap[taskRank]}}</span>\n      <Icon type=\"plus\" @click.stop=\"showInput\"></Icon>\n    </div>\n    <div class=\"task-input\" v-show=\"addInputShow\" v-clickoutside=\"handleClose\"  >\n      <i-input icon=\"checkmark\" placeholder=\"输入任务描述,按回车键完成\" v-on:on-enter=\"addTask\" v-on:on-click=\"addTask\" :value.sync=\"title\"></i-input>\n      <Date-picker type=\"daterange\"  placeholder=\"选择日期\" @click.stop :value.sync=\"taskDateRange\"></Date-picker>\n    </div>\n    <div class=\"task-list\">\n      <i-table :columns=\"columns\" :data=\"taskList\" :height=\"height\"></i-table>\n    </div>\n  </div>\n  <!--<i-input placeholder=\"输入任务描述,按回车键完成\" icon=\"happy-outline\"></i-input>-->\n</template>\n\n<script text=\"text/ecmascript-6\">\n  import clickoutside from 'components/directives/clickoutside';  //  wonderful\n  import {formatDate, getTodayRange} from 'common/js/util.js';\n  const MSG_STATUS_OK = 1;\n  const TASK_UNDONE = 0;\n  //  const TASK_DONE = 1;\n  export default {\n  \tprops: {\n  \t\ttaskRank: {\n  \t\t\ttype: Number,\n        required: true\n      },\n      dateRange: {\n  \t\t\ttype: Array,\n        required: true\n      },\n      taskType: {\n  \t\t\ttype: String,\n        required: true\n      }\n    },\n    directives: {\n      clickoutside\n    },\n    data() {\n  \t\treturn {\n  \t\t\ttitle: '',\n  \t\t\taddInputShow: false,\n        height: 0,\n        taskDateRange: [],\n        taskList: [\n        ],\n        columns: [\n          {\n          \ttitle: '任务名',\n            key: 'title'\n          },\n          {\n          \ttitle: '开始时间',\n            key: 'startTime'\n          },\n          {\n            title: '结束时间',\n            key: 'endTime'\n          },\n          {\n          \ttitle: '操作',\n            key: 'state',\n            render (row, column, index) {\n          \t\tlet state = row.state;\n          \t\tif (state === 1) {\n          \t\t\treturn `<i-button type=\"primary\" size=\"small\">查看</i-button><i-button type=\"error\" size=\"small\" @click=\"removeTask(${index})\">删除</i-button>`;\n              } else {\n                return `<i-button type=\"success\" size=\"small\" @click=\"finishTask(${index})\">完成</i-button><i-button type=\"error\" size=\"small\" @click=\"removeTask(${index})\">删除</i-button>`;\n              }\n            }\n          }\n        ]\n      };\n    },\n    created() {\n  \t\tthis.classMap = [null, 'error', 'warn', 'info', 'success'];\n  \t\tthis.textMap = [null, '很重要-很紧急', '重要不紧急', '不重要-紧急', '不重要-不紧急'];\n  \t\tthis.taskDateRange = getTodayRange();\n      this.getTasks();\n//      this.getTasks((response) => {\n//      \tconsole.log('this is ', this);\n//      \tconsole.log(response);\n//      });\n    },\n    ready() {\n      console.log(document.getElementsByClassName('task')[0].offsetHeight);\n      this.height = document.getElementsByClassName('rank' + this.taskRank)[0].offsetHeight - 50;\n    },\n    watch: {\n  \t\t'dateRange': function() {\n  \t\t\tconsole.log('dateRange changing');\n  \t\t\tthis.getTasks();\n      },\n      'taskType': function() {\n        console.log('dateType changing');\n        this.getTasks();\n      }\n    },\n    methods: {\n      showInput() {\n      \tconsole.log('添加dsa');\n      \tif (!this.addInputShow) {\n          this.addInputShow = true;\n        }\n        let that = this;\n        this.$nextTick(() => {\n          that.disableClickOutSide = true;\n        });\n      },\n      handleClose() {\n        if (this.disableClickOutSide) {\n          console.log('关闭');\n          if (this.addInputShow) {\n            this.addInputShow = false;\n          }\n        }\n      },\n      getTasks(callback) {\n      \tlet dateRange = this.dateRange;\n      \tlet taskRank = this.taskRank;\n      \tlet taskType = this.taskType;\n      \tthis.$http.get('/api/todoList', {\n          params: {\n            dateRange: {\n            \tdateStart: (new Date(dateRange[0])).toISOString(),\n              dateEnd: (new Date(dateRange[1])).toISOString()\n            },\n            taskRank,\n            taskType\n          }\n        }).then(response => {\n          let data = response.body;\n          if (data.status === MSG_STATUS_OK) {\n            let taskArrays = data.data.docs;\n            this.taskList = taskArrays.map((item) => {\n              return {\n                id: item._id,\n                title: item.title,\n                startTime: formatDate(new Date(item.startTime)),\n                endTime: formatDate(new Date(item.endTime)),\n                state: item.state\n              };\n            });\n            callback && callback(response);\n          }\n        });\n      },\n      addTask() {\n      \tconsole.log('addTask...');\n      \tthis.addInputShow = false;\n      \tlet taskDateRange = this.taskDateRange;\n        let title = this.title;\n        let rank = this.taskRank;\n        this.title = '';\n      \tthis.$http.post('/api/todo', {\n      \t\ttitle,\n          description: '',\n          startTime: new Date(taskDateRange[0]).toISOString(),\n          endTime: new Date(taskDateRange[1]).toISOString(),\n          rank,\n          'state': TASK_UNDONE\n        }).then(response => {\n        \tlet data = response.body;\n        \tif (data.status === MSG_STATUS_OK) {\n        \t\tthis.getTasks();\n          }\n        });\n      },\n      finishTask(index) {\n      \tlet id = this.taskList[index].id;\n      \tthis.$http.put('/api/todo', {\n      \t\tid,\n          state: 1\n        }).then(response => {\n        \tif (response.body.status === MSG_STATUS_OK) {\n            this.getTasks();\n          }\n        });\n      },\n      removeTask(index) {\n      \tconsole.log(index);\n      \tlet id = this.taskList[index].id;\n      \tthis.$http.delete('/api/todo', {\n      \t\tparams: {\n      \t\t\tid\n          }\n        }).then((response) => {\n          let status = response.body.status;\n          if (status === MSG_STATUS_OK) {\n            this.getTasks();\n          }\n        });\n      }\n    }\n  };\n</script>\n\n<style rel=\"stylesheet/stylus\" lang=\"stylus\">\n  .task\n    position relative\n    height 100%\n    .task-add\n      display flex\n      font-size 16px\n      padding 10px\n      .task-description\n        flex 1\n      .ivu-icon-plus\n        color #819298\n        line-height 24px\n        cursor pointer\n      &.error\n        background-color: #FFEDE7\n        color: #F76332\n      &.warn\n        background-color: #FFEFCB\n        color: #FEAE6A\n      &.info\n        background-color: #D6F4FE\n        color: #3FB6DA\n      &.success\n        background-color: #EFD;\n        color: #89C557;\n    .task-input\n      position absolute\n      z-index 1000\n      width 100%\n</style>\n\n\n\n// WEBPACK FOOTER //\n// task.vue?01f18a59","module.exports = \" <div id=main> <div class=body> <div class=header> <div class=date-pick-wrapper> <div class=date-pick-show> <span id=date-show v-text=dateRange|dateFMT></span> <i class=\\\"icon icon-angle-left\\\" @click=changeDate(-1)></i> <i class=\\\"icon icon-angle-right\\\" @click=changeDate(1)></i> </div> <div class=date-pick> <span class=today :class=\\\"{'active':isToday}\\\" @click=setToday>今天</span> <ul class=type-pick> <li @click=\\\"setDateType('DAY')\\\" :class=\\\"{active:dateType==='day'}\\\">日</li> <li @click=\\\"setDateType('WEEK')\\\" :class=\\\"{active:dateType==='week'}\\\">周</li> <li @click=\\\"setDateType('MONTH')\\\" :class=\\\"{active:dateType==='month'}\\\">月</li> </ul> </div> </div> <div class=task-type> <div class=select-wrapper> <i-select style=width:100px :model.sync=taskType> <i-option value=ALL>全部</i-option> <i-option value=DONE>已完成</i-option> <i-option value=UNDONE>未完成</i-option> </i-select> </div> </div> </div> <div class=content> <div class=left-wrapper> <div class=rank1> <task :task-rank=1 :date-range=dateRange :task-type=taskType></task> </div> <div class=rank3> <task :task-rank=3 :date-range=dateRange :task-type=taskType></task> </div> </div> <div class=right-wrapper> <div class=rank2> <task :task-rank=2 :date-range=dateRange :task-type=taskType></task> </div> <div class=rank4> <task :task-rank=4 :date-range=dateRange :task-type=taskType></task> </div> </div> </div> </div> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./~/eslint-loader!./src/App.vue\n// module id = 11\n// module chunks = 1","module.exports = \" <div class=task> <div class=task-add :class=classMap[taskRank]> <span class=task-description>{{textMap[taskRank]}}</span> <icon type=plus @click.stop=showInput></icon> </div> <div class=task-input v-show=addInputShow v-clickoutside=handleClose> <i-input icon=checkmark placeholder=输入任务描述,按回车键完成 v-on:on-enter=addTask v-on:on-click=addTask :value.sync=title></i-input> <date-picker type=daterange placeholder=选择日期 @click.stop :value.sync=taskDateRange></date-picker> </div> <div class=task-list> <i-table :columns=columns :data=taskList :height=height></i-table> </div> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./~/eslint-loader!./src/components/task/task.vue\n// module id = 12\n// module chunks = 1","var __vue_script__, __vue_template__\nvar __vue_styles__ = {}\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../node_modules/vue-loader/lib/style-rewriter.js!stylus-loader?sourceMap!../node_modules/vue-loader/lib/selector.js?type=style&index=0!../node_modules/eslint-loader/index.js!./App.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../node_modules/vue-loader/lib/selector.js?type=script&index=0!../node_modules/eslint-loader/index.js!./App.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../node_modules/vue-loader/lib/selector.js?type=template&index=0!../node_modules/eslint-loader/index.js!./App.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\nif (__vue_template__) {\n__vue_options__.template = __vue_template__\n}\nif (!__vue_options__.computed) __vue_options__.computed = {}\nObject.keys(__vue_styles__).forEach(function (key) {\nvar module = __vue_styles__[key]\n__vue_options__.computed[key] = function () { return module }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 13\n// module chunks = 1","var __vue_script__, __vue_template__\nvar __vue_styles__ = {}\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!stylus-loader?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!../../../node_modules/eslint-loader/index.js!./task.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!../../../node_modules/eslint-loader/index.js!./task.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!../../../node_modules/eslint-loader/index.js!./task.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\nif (__vue_template__) {\n__vue_options__.template = __vue_template__\n}\nif (!__vue_options__.computed) __vue_options__.computed = {}\nObject.keys(__vue_styles__).forEach(function (key) {\nvar module = __vue_styles__[key]\n__vue_options__.computed[key] = function () { return module }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/task/task.vue\n// module id = 14\n// module chunks = 1"],"sourceRoot":""}